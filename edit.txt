import { NextResponse } from 'next/server';
import httpProxy from 'next-http-proxy-middleware';

export async function POST(req, res) {
  return httpProxy(req, res, {
    target: 'https://api.example.com', // آدرس سرور مقصد
    changeOrigin: true,
    pathRewrite: { '^/api': '' }, // حذف پیشوند `/api` از آدرس
  });
}

export async function GET(req, res) {
  return httpProxy(req, res, {
    target: 'https://api.example.com', // آدرس سرور مقصد
    changeOrigin: true,
    pathRewrite: { '^/api': '' }, // حذف پیشوند `/api` از آدرس
  });
}

// برای سایر متدها (PUT, DELETE و غیره) نیز به همین شکل عمل کنید.





import { NextResponse } from 'next/server';
import httpProxy from 'next-http-proxy-middleware';

export async function POST(req, res) {
  return httpProxy(req, res, {
    target: 'https://storage.example.com', // آدرس سرور مقصد برای آپلودها
    changeOrigin: true,
    pathRewrite: { '^/uploads': '' }, // حذف پیشوند `/uploads` از آدرس
  });
}

export async function GET(req, res) {
  return httpProxy(req, res, {
    target: 'https://storage.example.com', // آدرس سرور مقصد برای آپلودها
    changeOrigin: true,
    pathRewrite: { '^/uploads': '' }, // حذف پیشوند `/uploads` از آدرس
  });
}